<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>data - Tag - smcleod.net</title><link>https://beta.smcleod.net/tags/data/</link><description>data - Tag - smcleod.net</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>Sam McLeod</copyright><lastBuildDate>Mon, 23 May 2016 00:00:00 +0000</lastBuildDate><atom:link href="https://beta.smcleod.net/tags/data/" rel="self" type="application/rss+xml"/><item><title>Online Conversion from SQL_ASCII to UTF8 in PostgreSQL</title><link>https://beta.smcleod.net/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/</link><pubDate>Mon, 23 May 2016 00:00:00 +0000</pubDate><author><name>Sam McLeod</name></author><guid>https://beta.smcleod.net/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/</guid><description><![CDATA[<div class="featured-image">
                <img src="/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/patrick-tomasso-71909.jpg" referrerpolicy="no-referrer">
            </div>Scripts and source available here: sql_ascii_to_utf8
The GoalTo be able to take a Postgres Database which is in SQL_ASCII encoding, and import it into a UTF8 encoded database.
Requirements:
Python3 (For RHEL/CentOS 7 yum install python34) python-nagiosplugin My pre-built RPMs or pip3 install nagiosplugin PyNagSystemD The ProblemPostreSQL will generate errors like this if it encounters any non-UTF8 byte-sequences during a database restore:
# pg_dump -Fc test_badchar | pg_restore -d test_badchar_utf8 pg_restore: [archiver (db)] Error while PROCESSING TOC: pg_restore: [archiver (db)] Error from TOC entry 2839; 0 26852 TABLE DATA table101 postgres pg_restore: [archiver (db)] COPY failed for table &#34;table101&#34;: ERROR: invalid byte sequence for encoding &#34;UTF8&#34;: 0x91 CONTEXT: COPY table101, line 1 WARNING: errors ignored on restore: 1 And the corresponding data will be omitted from the database (in this case, the whole table, even the rows which did not have a problem):]]></description></item></channel></rss>