<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.105.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title class=pjax-title>smcleod.net</title><meta name=Description content><meta property="og:title" content="smcleod.net"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://beta.smcleod.net/"><meta property="og:image" content="https://beta.smcleod.net/apple-touch-icon.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://beta.smcleod.net/apple-touch-icon.png"><meta name=twitter:title content="smcleod.net"><meta name=twitter:description content><meta name=application-name content="smcleod.net"><meta name=apple-mobile-web-app-title content="smcleod.net"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=../../logo.svg><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://beta.smcleod.net/><link rel=alternate href=../../index.xml type=application/rss+xml title=smcleod.net><link rel=feed href=../../index.xml type=application/rss+xml title=smcleod.net><link rel=stylesheet href=../../lib/normalize/normalize.min.8235a67a2521ef99fb1e455a5891b022af1653b4ede3cfffcac4e473beee88fbcc1a36bbb3cfdd75fd6df46732032f9d96e30adae9c88b769e1fbf7945cd27e0.css integrity="sha512-gjWmeiUh75n7HkVaWJGwIq8WU7Tt48//ysTkc77uiPvMGja7s8/ddf1t9GcyAy+dluMK2unIi3aeH795Rc0n4A=="><link rel=stylesheet href=../../css/style.min.18108d84e024a889c14d785ff688fe13b654fa9bdc1118490c01fd2d42d6d7ae133fc32040282141aa703a4581fc715573ddde9fdb5f6520fbace1c06f846cd0.css integrity="sha512-GBCNhOAkqInBTXhf9oj+E7ZU+pvcERhJDAH9LULW164TP8MgQCghQapwOkWB/HFVc93en9tfZSD7rOHAb4Rs0A=="><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=../../lib/fontawesome-free/all.min.eb8387c9eb0ab6d4fa4d7ad397d15df13b92c009a1eb221b757dd1ecfccabc78a4c5b681847a7f4198ff7cd60abed8300508c9dea138cd1f4a85f09f09b2092a.css integrity="sha512-64OHyesKttT6TXrTl9Fd8TuSwAmh6yIbdX3R7PzKvHikxbaBhHp/QZj/fNYKvtgwBQjJ3qE4zR9KhfCfCbIJKg=="><noscript><link rel=stylesheet href=../../lib/fontawesome-free/all.min.eb8387c9eb0ab6d4fa4d7ad397d15df13b92c009a1eb221b757dd1ecfccabc78a4c5b681847a7f4198ff7cd60abed8300508c9dea138cd1f4a85f09f09b2092a.css integrity="sha512-64OHyesKttT6TXrTl9Fd8TuSwAmh6yIbdX3R7PzKvHikxbaBhHp/QZj/fNYKvtgwBQjJ3qE4zR9KhfCfCbIJKg=="></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=../../lib/animate/animate.min.738daa4d2c3fc0f677ff92c1cc3f81c397fb6d2176a31a2eeb011bf88fe5a9e68a57914321f32fbd1a7bef6cb88dc24b2ae1943a96c931d83f053979d1f25803.css integrity="sha512-c42qTSw/wPZ3/5LBzD+Bw5f7bSF2oxou6wEb+I/lqeaKV5FDIfMvvRp772y4jcJLKuGUOpbJMdg/BTl50fJYAw=="><noscript><link rel=stylesheet href=../../lib/animate/animate.min.738daa4d2c3fc0f677ff92c1cc3f81c397fb6d2176a31a2eeb011bf88fe5a9e68a57914321f32fbd1a7bef6cb88dc24b2ae1943a96c931d83f053979d1f25803.css integrity="sha512-c42qTSw/wPZ3/5LBzD+Bw5f7bSF2oxou6wEb+I/lqeaKV5FDIfMvvRp772y4jcJLKuGUOpbJMdg/BTl50fJYAw=="></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/beta.smcleod.net\/","inLanguage":"en","author":{"@type":"Person","name":"Sam McLeod"},"image":"https:\/\/beta.smcleod.net\/apple-touch-icon.png","thumbnailUrl":"https:\/\/beta.smcleod.net\/apple-touch-icon.png","license":"Sam McLeod","name":"smcleod.net"}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark")}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")]</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=../../ title=smcleod.net><img class="lazyload logo" data-src=../../logo.svg data-srcset="../../logo.svg, ../../logo.svg 1.5x, ../../logo.svg 2x" data-sizes=auto alt=/logo.svg title=/logo.svg>smcleod.net</a></div><div class=menu><div class=menu-inner><a class=menu-item href=../../posts/>üìù Posts </a><a class=menu-item href=../../categories/>üç± Categories </a><a class=menu-item href=../../series/>üìö Series </a><a class=menu-item href=../../links/ title="Links to software and services I use">üîó Links </a><a class=menu-item href=../../about/ title="Sam McLeod">ü§¶üèª‚Äç‚ôÇÔ∏è About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=# onclick=return!1 class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=../../ title=smcleod.net><img class="lazyload logo" data-src=../../logo.svg data-srcset="../../logo.svg, ../../logo.svg 1.5x, ../../logo.svg 2x" data-sizes=auto alt=/logo.svg title=/logo.svg>smcleod.net</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# onclick=return!1 class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=../../posts/ title>üìù Posts</a><a class=menu-item href=../../categories/ title>üç± Categories</a><a class=menu-item href=../../series/ title>üìö Series</a><a class=menu-item href=../../links/ title="Links to software and services I use">üîó Links</a><a class=menu-item href=../../about/ title="Sam McLeod">ü§¶üèª‚Äç‚ôÇÔ∏è About</a><a href=# onclick=return!1 class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class="page home" posts><div class=home-profile><div class=home-avatar><a href=../../posts/ title="üìù Posts"><img class=lazyload data-src=../../profilephoto/logo.svg data-srcset="../../profilephoto/logo.svg, ../../profilephoto/logo.svg 1.5x, ../../profilephoto/logo.svg 2x" data-sizes=auto alt=/profilephoto/logo.svg title=/profilephoto/logo.svg height=6rem width=6rem></a></div><h2 class=home-subtitle><div id=id-1 class=typeit></div></h2><div class=links><a href=https://github.com/sammcj title=GitHub target=_blank rel="noopener noreferrer me"><i class="fab fa-github-alt fa-fw"></i></a><a href=https://linkedin.com/in/sammcj title=LinkedIn target=_blank rel="noopener noreferrer me"><i class="fab fa-linkedin fa-fw"></i></a><a href=https://twitter.com/s_mcleod title=Twitter target=_blank rel="noopener noreferrer me"><i class="fab fa-twitter fa-fw"></i></a><a href=https://gitlab.com/sammcj title=GitLab target=_blank rel="noopener noreferrer me"><i class="fab fa-gitlab fa-fw"></i></a><a href=https://www.goodreads.com/user/show/5836466-sam title=Goodreads target=_blank rel="noopener noreferrer me"><i class="fab fa-goodreads fa-fw"></i></a><a href=https://www.last.fm/user/sammcj2000 title=Last.fm target=_blank rel="noopener noreferrer me"><i class="fab fa-lastfm fa-fw"></i></a><a href="https://news.ycombinator.com/user?id=smcleod" title="Hacker News" target=_blank rel="noopener noreferrer me"><i class="fab fa-hacker-news fa-fw"></i></a><a href=../../index.xml title=RSS target=_blank rel="noopener noreferrer me"><i class="fas fa-rss fa-fw"></i></a></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2016/07/update-delayed-serial-stonith-design/ aria-label="Update Delayed Serial STONITH Design"><img class=lazyload data-src=../../2016/07/update-delayed-serial-stonith-design/noah-kuhn-27481.jpg data-srcset="../../2016/07/update-delayed-serial-stonith-design/noah-kuhn-27481.jpg, ../../2016/07/update-delayed-serial-stonith-design/noah-kuhn-27481.jpg 1.5x, ../../2016/07/update-delayed-serial-stonith-design/noah-kuhn-27481.jpg 2x" data-sizes=auto alt=/2016/07/update-delayed-serial-stonith-design/noah-kuhn-27481.jpg title=/2016/07/update-delayed-serial-stonith-design/noah-kuhn-27481.jpg height=687 width=460></a></div><h1 class=single-title itemprop="name headline"><a href=../../2016/07/update-delayed-serial-stonith-design/>Update Delayed Serial STONITH Design</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2016-07-04>2016-07-04</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>note: This is a follow up post from 2015-07-21-rcd-stonith
A Linux Cluster Base STONITH provider for use with modern Pacemaker clustersThis has since been accepted and merged into Fedora&rsquo;s code base and as such will make it&rsquo;s way to RHEL.
Source Code: Github Diptrace CAD Design: Github I have open sourced the CAD circuit design and made this available within this repo under CAD Design and Schematics Related RedHat Bug: https://bugzilla.redhat.com/show_bug.cgi?id=1240868 v1 vs v2/v3 versions of the rcd_serial STONITH systemThe v2/v3 cables include the following improvements:
Have a connector on the outside of the server (that&rsquo;s female side runs from the reset pin &lsquo;hijacker&rsquo;) so that cables can be easily disconnected.</div><div class=post-footer><a href=../../2016/07/update-delayed-serial-stonith-design/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/storage/>storage</a>,&nbsp;<a href=../../tags/hardware/>hardware</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2016/05/monitoring-systemd-units-with-nagios/ aria-label="Monitoring SystemD Units With Nagios"><img class=lazyload data-src=../../2016/05/monitoring-systemd-units-with-nagios/feature-laptop.jpg data-srcset="../../2016/05/monitoring-systemd-units-with-nagios/feature-laptop.jpg, ../../2016/05/monitoring-systemd-units-with-nagios/feature-laptop.jpg 1.5x, ../../2016/05/monitoring-systemd-units-with-nagios/feature-laptop.jpg 2x" data-sizes=auto alt=/2016/05/monitoring-systemd-units-with-nagios/feature-laptop.jpg title=/2016/05/monitoring-systemd-units-with-nagios/feature-laptop.jpg height=960 width=1440></a></div><h1 class=single-title itemprop="name headline"><a href=../../2016/05/monitoring-systemd-units-with-nagios/>Monitoring SystemD Units With Nagios</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2016-05-23>2016-05-23</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>Ever forgotten to add a critical service to monitoring?
Want to know if a service or process fails without explicitly monitoring every service on a host?
&mldr;Then why not use SystemD&rsquo;s existing knowledge of all the enabled services? Thanks to &lsquo;Kbyte&rsquo; who made a simple Nagios plugin to do just this!
Requirements Python3 (For RHEL/CentOS 7 yum install python34) python-nagiosplugin My pre-built RPMs or pip3 install nagiosplugin PyNagSystemD</div><div class=post-footer><a href=../../2016/05/monitoring-systemd-units-with-nagios/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/software/>software</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/ aria-label="Online Conversion from SQL_ASCII to UTF8 in PostgreSQL"><img class=lazyload data-src=../../2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/patrick-tomasso-71909.jpg data-srcset="../../2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/patrick-tomasso-71909.jpg, ../../2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/patrick-tomasso-71909.jpg 1.5x, ../../2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/patrick-tomasso-71909.jpg 2x" data-sizes=auto alt=/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/patrick-tomasso-71909.jpg title=/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/patrick-tomasso-71909.jpg height=682 width=1024></a></div><h1 class=single-title itemprop="name headline"><a href=../../2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/>Online Conversion from SQL_ASCII to UTF8 in PostgreSQL</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2016-05-23>2016-05-23</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>Scripts and source available here: sql_ascii_to_utf8
The GoalTo be able to take a Postgres Database which is in SQL_ASCII encoding, and import it into a UTF8 encoded database.
Requirements:
Python3 (For RHEL/CentOS 7 yum install python34) python-nagiosplugin My pre-built RPMs or pip3 install nagiosplugin PyNagSystemD The ProblemPostreSQL will generate errors like this if it encounters any non-UTF8 byte-sequences during a database restore:
# pg_dump -Fc test_badchar | pg_restore -d test_badchar_utf8 pg_restore: [archiver (db)] Error while PROCESSING TOC: pg_restore: [archiver (db)] Error from TOC entry 2839; 0 26852 TABLE DATA table101 postgres pg_restore: [archiver (db)] COPY failed for table "table101": ERROR: invalid byte sequence for encoding "UTF8": 0x91 CONTEXT: COPY table101, line 1 WARNING: errors ignored on restore: 1 And the corresponding data will be omitted from the database (in this case, the whole table, even the rows which did not have a problem):</div><div class=post-footer><a href=../../2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/software/>software</a>,&nbsp;<a href=../../tags/data/>data</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2016/05/speeding-up-rsync/ aria-label="Speeding Up rsync"><img class=lazyload data-src=../../2016/05/speeding-up-rsync/robin-pierre-323861.jpg data-srcset="../../2016/05/speeding-up-rsync/robin-pierre-323861.jpg, ../../2016/05/speeding-up-rsync/robin-pierre-323861.jpg 1.5x, ../../2016/05/speeding-up-rsync/robin-pierre-323861.jpg 2x" data-sizes=auto alt=/2016/05/speeding-up-rsync/robin-pierre-323861.jpg title=/2016/05/speeding-up-rsync/robin-pierre-323861.jpg height=687 width=1032></a></div><h1 class=single-title itemprop="name headline"><a href=../../2016/05/speeding-up-rsync/>Speeding Up rsync</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2016-05-03>2016-05-03</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>The most common way to use rsync is probably as such:
rsync -avr user@&lt;source>:&lt;source_dir> &lt;dest_dir> Resulting in 30-35MB/s depending on file sizes
This can be improved by using a more efficient, less secure encryption algorithm, disabling compression and telling the SSH client to disable some unneeded features that slow things down.
With the settings below I have achieved 100MB/s (at work between VMs) and over 300MB/s at home between SSD drives.
Requirements Python3 (For RHEL/CentOS 7 yum install python34) python-nagiosplugin My pre-built RPMs or pip3 install nagiosplugin PyNagSystemD rsync -arv --numeric-ids --progress -e "ssh -T -c aes256-gcm@openssh.com -o Compression=no -x" user@&lt;source>:&lt;source_dir> &lt;dest_dir> If you want to delete files at the DST that have been deleted at the SRC (obviously use with caution:</div><div class=post-footer><a href=../../2016/05/speeding-up-rsync/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/software/>software</a>,&nbsp;<a href=../../tags/networking/>networking</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2016/04/benchmarking-io-with-fio/ aria-label="Benchmarking IO with FIO"><img class=lazyload data-src=../../2016/04/benchmarking-io-with-fio/daniel-mayovskiy-303666.jpg data-srcset="../../2016/04/benchmarking-io-with-fio/daniel-mayovskiy-303666.jpg, ../../2016/04/benchmarking-io-with-fio/daniel-mayovskiy-303666.jpg 1.5x, ../../2016/04/benchmarking-io-with-fio/daniel-mayovskiy-303666.jpg 2x" data-sizes=auto alt=/2016/04/benchmarking-io-with-fio/daniel-mayovskiy-303666.jpg title=/2016/04/benchmarking-io-with-fio/daniel-mayovskiy-303666.jpg height=1023 width=1536></a></div><h1 class=single-title itemprop="name headline"><a href=../../2016/04/benchmarking-io-with-fio/>Benchmarking IO with FIO</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2016-04-29>2016-04-29</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>This is a quick tldr there are many other situations and options you could consider FIO man page IOP/s = Input or Output operations per second Throughput = How many MB/s can you read/write continuously Variables worth tuning based on your situation --iodepth The iodepth is very dependant on your hardware.
Rotational drives without much cache and high latency (i.e. desktop SATA drives) will not benefit from a large iodepth, Values between 16 to 64 could be sensible.
High speed, lower latency SSDs (especially NVMe devices) can utilise a much higher iodepth, Values between 256 to 4096 could be sensible.</div><div class=post-footer><a href=../../2016/04/benchmarking-io-with-fio/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/storage/>storage</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2016/02/mirroring-a-gitlab-project-to-github/ aria-label="Mirroring a Gitlab project to Github"><img class=lazyload data-src=../../2016/02/mirroring-a-gitlab-project-to-github/backdrop-austria.jpg data-srcset="../../2016/02/mirroring-a-gitlab-project-to-github/backdrop-austria.jpg, ../../2016/02/mirroring-a-gitlab-project-to-github/backdrop-austria.jpg 1.5x, ../../2016/02/mirroring-a-gitlab-project-to-github/backdrop-austria.jpg 2x" data-sizes=auto alt=/2016/02/mirroring-a-gitlab-project-to-github/backdrop-austria.jpg title=/2016/02/mirroring-a-gitlab-project-to-github/backdrop-austria.jpg height=687 width=916></a></div><h1 class=single-title itemprop="name headline"><a href=../../2016/02/mirroring-a-gitlab-project-to-github/>Mirroring a Gitlab project to Github</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2016-02-04>2016-02-04</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>Let&rsquo;s pretend you have a project on Gitlab called ask-izzy and you want to mirror it up to Gitlab which is located at https://github.com/ask-izzy/ask-izzy
Assuming you&rsquo;re running Gitlab as the default user of git and that your repositories are stored in /mnt/repositories you can following something similar to the following instructions:
Grant write access to Github Get your Gitlab install&rsquo;s pubkey from the git user
cat /home/git/.ssh/id_rsa.pub On Github add this pubkey as deploy key on the repo, make sure you tick the option to allow write access.
Add a post-receive hook to the Gitlab project mkdir /mnt/repositories/developers/ask-izzy.git/custom_hooks/ echo "exec git push --quiet github &" > \ /mnt/repositories/developers/ask-izzy.</div><div class=post-footer><a href=../../2016/02/mirroring-a-gitlab-project-to-github/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/software/>software</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2016/01/askizzy/ aria-label=AskIzzy><img class=lazyload data-src=../../2016/01/askizzy/melbourne.jpg data-srcset="../../2016/01/askizzy/melbourne.jpg, ../../2016/01/askizzy/melbourne.jpg 1.5x, ../../2016/01/askizzy/melbourne.jpg 2x" data-sizes=auto alt=/2016/01/askizzy/melbourne.jpg title=/2016/01/askizzy/melbourne.jpg height=363 width=1344></a></div><h1 class=single-title itemprop="name headline"><a href=../../2016/01/askizzy/>AskIzzy</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2016-01-29>2016-01-29</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>Today we launched a mobile website for homeless people
&mldr; and it was launched by one of Australia&rsquo;s many recent Prime Ministers
Today alone we served up over 87,000 requestsAs many of you know, I work with Infoxchange as the operations lead.
When I first heard the idea of a website or app for people that have found or are worried about finding themselves homeless in Australia I really didn&rsquo;t think it made sense - until I saw the stats showing how many homeless people in Australia have regular access to a smart phone and data either via a cellular provider or free WiFi.</div><div class=post-footer><a href=../../2016/01/askizzy/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/ aria-label="Fix XenServer SR with corrupt or invalid metadata"><img class=lazyload data-src=../../2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/samuel-zeller-358865.jpg data-srcset="../../2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/samuel-zeller-358865.jpg, ../../2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/samuel-zeller-358865.jpg 1.5x, ../../2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/samuel-zeller-358865.jpg 2x" data-sizes=auto alt=/2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/samuel-zeller-358865.jpg title=/2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/samuel-zeller-358865.jpg height=859 width=1290></a></div><h1 class=single-title itemprop="name headline"><a href=../../2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/>Fix XenServer SR with corrupt or invalid metadata</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2016-01-18>2016-01-18</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>If a disk / VDI is orphaned or only partially deleted you&rsquo;ll notice that under the SR it&rsquo;s not assigned to any VM.
This can cause issues that look like metadata corruption resulting in the inability to migrate VMs or edit storage.
For example:
[root@xenserver-host ~]# xe vdi-destroy uuid=6c2cd848-ac0e-441c-9cd6-9865fca7fe8b Error code: SR_BACKEND_FAILURE_181 Error parameters: , Error in Metadata volume operation for SR. [opterr=VDI delete operation failed for parameters: /dev/VG_XenStorage-3ae1df17-06ee-7202-eb92-72c266134e16/MGT, 6c2cd848-ac0e-441c-9cd6-9865fca7fe8b. Error: Failed to write file with params [3, 0, 512, 512]. Error: 5], Removing stale VDIsTo fix this, you need to remove those VDIs from the SR after first deleting the logical volume:</div><div class=post-footer><a href=../../2016/01/fix-xenserver-sr-with-corrupt-or-invalid-metadata/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/storage/>storage</a>,&nbsp;<a href=../../tags/xen/>xen</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2015/12/iscsi-scsi-id-/-serial-persistence/ aria-label="iSCSI SCSI-ID / Serial Persistence"><img class=lazyload data-src=../../2015/12/iscsi-scsi-id-/-serial-persistence/feature-san-fran.jpg data-srcset="../../2015/12/iscsi-scsi-id-/-serial-persistence/feature-san-fran.jpg, ../../2015/12/iscsi-scsi-id-/-serial-persistence/feature-san-fran.jpg 1.5x, ../../2015/12/iscsi-scsi-id-/-serial-persistence/feature-san-fran.jpg 2x" data-sizes=auto alt=/2015/12/iscsi-scsi-id-/-serial-persistence/feature-san-fran.jpg title=/2015/12/iscsi-scsi-id-/-serial-persistence/feature-san-fran.jpg height=859 width=571></a></div><h1 class=single-title itemprop="name headline"><a href=../../2015/12/iscsi-scsi-id-/-serial-persistence/>iSCSI SCSI-ID / Serial Persistence</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2015-12-14>2015-12-14</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>&ldquo;Having a SCSI ID is a f*cking idiotic thing to do.&rdquo;
- Linus Torvalds
&mldr;and after the amount of time I&rsquo;ve wasted getting XenServer to play nicely with LIO iSCSI failover I tend to agree.
The Problem One oddity of Xen / XenServer&rsquo;s storage subsystem is that it identifies iSCSI storage repositories via a calculated SCSI ID rather than the iSCSI Serial - which would be the sane thing to do.
Citrix&rsquo;s less than ideal take on dealing with SCSI ID changes is for you to take your VMs offline, disconnected the storage repositories, recreate them, then go through all your VMs and re-attach their orphaned disks hoping that you remembered to add some sort of hint as to what VM they belong to, then finally wipe the sweat and tears from your face.</div><div class=post-footer><a href=../../2015/12/iscsi-scsi-id-/-serial-persistence/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/storage/>storage</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><div class=featured-image-preview><a href=../../2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/ aria-label="How to cluster and failover (almost) anything - An intro to Pacemaker and Corosync"><img class=lazyload data-src=../../2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/tim-napier-181584.jpg data-srcset="../../2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/tim-napier-181584.jpg, ../../2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/tim-napier-181584.jpg 1.5x, ../../2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/tim-napier-181584.jpg 2x" data-sizes=auto alt=/2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/tim-napier-181584.jpg title=/2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/tim-napier-181584.jpg height=687 width=1032></a></div><h1 class=single-title itemprop="name headline"><a href=../../2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/>How to cluster and failover (almost) anything - An intro to Pacemaker and Corosync</a></h1><div class=post-meta><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/sammcj title=Author target=_blank rel="noopener noreferrer author" class=author>Sam McLeod</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2015-11-09>2015-11-09</time></span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=../../categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=content>Slides Failover Demo</div><div class=post-footer><a href=../../2015/11/how-to-cluster-and-failover-almost-anything-an-intro-to-pacemaker-and-corosync/>Read more...</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=../../tags/tech/>tech</a>,&nbsp;<a href=../../tags/storage/>storage</a>,&nbsp;<a href=../../tags/clustering/>clustering</a></div></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=../../>1</a></span></li><li class=page-item><span class=page-link><a href=../../page/2/>2</a></span></li><li class=page-item><span class=page-link><a href=../../page/3/>3</a></span></li><li class="page-item active"><span class=page-link><a href=../../page/4/>4</a></span></li><li class=page-item><span class=page-link><a href=../../page/5/>5</a></span></li><li class=page-item><span class=page-link><a href=../../page/6/>6</a></span></li><li class=page-item><span class=page-link><a href=../../page/7/>7</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2010 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/sammcj target=_blank rel="noopener noreferrer">Sam McLeod</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=../../atkinson-hyperlegible/atkinson-hyperlegible.eab28ad9966784d2ce9271970fa9cde34de4a323c0e4cd22fb5ffbf5261b049f52e236f1c06684c0ba73f72454f180c6e9e4667bee6cec7e9d5ac2d9dcb7b24e.css integrity="sha512-6rKK2ZZnhNLOknGXD6nN403koyPA5M0i+1/79SYbBJ9S4jbxwGaEwLpz9yRU8YDG6eRme+5s7H6dWsLZ3LeyTg=="><noscript><link rel=stylesheet href=../../atkinson-hyperlegible/atkinson-hyperlegible.eab28ad9966784d2ce9271970fa9cde34de4a323c0e4cd22fb5ffbf5261b049f52e236f1c06684c0ba73f72454f180c6e9e4667bee6cec7e9d5ac2d9dcb7b24e.css integrity="sha512-6rKK2ZZnhNLOknGXD6nN403koyPA5M0i+1/79SYbBJ9S4jbxwGaEwLpz9yRU8YDG6eRme+5s7H6dWsLZ3LeyTg=="></noscript><script type=text/javascript src=../../lib/autocomplete/autocomplete.min.0dcc8ee301dccbd9fb18115a1176e1293ca233b99aee5f5d12f218463c34eccea29f842827fc1ce330cf26e1e21b1382725ad3d0703cbde9f7e28552bcd92c07.js integrity="sha512-DcyO4wHcy9n7GBFaEXbhKTyiM7ma7l9dEvIYRjw07M6in4QoJ/wc4zDPJuHiGxOCclrT0HA8ven34oVSvNksBw=="></script><script type=text/javascript src=../../lib/fuse/fuse.min.3dd1499ec34f39e57a4363bb184754a5023e0f9c47115d67dbec47058d78fb562f0c929c84d44a0a1ca7f84ed73b907e40fa84995338a66677721853139fb70f.js integrity="sha512-PdFJnsNPOeV6Q2O7GEdUpQI+D5xHEV1n2+xHBY14+1YvDJKchNRKChyn+E7XO5B+QPqEmVM4pmZ3chhTE5+3Dw=="></script><script type=text/javascript src=../../lib/lazysizes/lazysizes.min.ab9f37a692ab09173b3793b49f69f352227eb2e52fec4b752467a5b386d739a30541c6a63e4f478dd5249d9bae16304db3bb6c32e69d81ee64f51cdd98efb519.js integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ=="></script><script type=text/javascript src=../../lib/topbar/topbar.min.db5613fde0d014e29123106077225a764bdb4bdf791c2d252c1db5c09f19ea0bd181d29e10a1c03fddc6b0666d83ed17645ee84c31fb405fc7c0b8b38fd95eb0.js integrity="sha512-21YT/eDQFOKRIxBgdyJadkvbS995HC0lLB21wJ8Z6gvRgdKeEKHAP93GsGZtg+0XZF7oTDH7QF/HwLizj9lesA=="></script><script type=text/javascript src=../../lib/pjax/pjax.min.8f92ba6fd6079d25aa09e1be3b1e3568438eba0fa53a093eb559684245a9c227d65e346122eb048ee9439ac9af9ce653c1ed88f20305c6121e946035c42705b0.js integrity="sha512-j5K6b9YHnSWqCeG+Ox41aEOOug+lOgk+tVloQkWpwifWXjRhIusEjulDmsmvnOZTwe2I8gMFxhIelGA1xCcFsA=="></script><script type=text/javascript src=../../js/theme.min.js defer></script></div><div class=pjax-assets><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:100},data:{"id-1":"The personal blog of Sam McLeod"},search:{distance:100,findAllMatches:!0,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:3,noResultsFound:"No results found",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!0},sharerjs:!0,typeit:{cursorChar:"_",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:50}}</script><script type=text/javascript src=../../lib/clipboard/clipboard.min.b08a94127467df50609e03e61edd897a7ce57830ec5f060efa2caf438e8cc3a44bfae7405198f69ffbbf3c663cd0dc51c729ceed1f71206c792c4cf0e0835625.js integrity="sha512-sIqUEnRn31BgngPmHt2JenzleDDsXwYO+iyvQ46Mw6RL+udAUZj2n/u/PGY80NxRxynO7R9xIGx5LEzw4INWJQ=="></script><script type=text/javascript src=../../lib/sharer/sharer.min.cab91d53e60c836a90e16a5091059006925296eeed2c665fc744b7e7755ec3ab5c4e58e3c83899af70d8f690e004c2ca62062e11b0c7efdced87f80d074cfa3e.js integrity="sha512-yrkdU+YMg2qQ4WpQkQWQBpJSlu7tLGZfx0S353Vew6tcTljjyDiZr3DY9pDgBMLKYgYuEbDH79zth/gNB0z6Pg=="></script><script type=text/javascript src=../../lib/typeit/typeit.min.f27efa857ac46448d67802135c65454dfc450176698f8fb06912d192dada782d98abfd8fbaf9ad33a15fb7971ed227e86d2082b88c2319260c237f147c9a624b.js integrity="sha512-8n76hXrEZEjWeAITXGVFTfxFAXZpj4+waRLRktraeC2Yq/2PuvmtM6Fft5ce0ifobSCCuIwjGSYMI38UfJpiSw=="></script></div></body></html>